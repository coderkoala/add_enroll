[
 {
  "docstatus": 0, 
  "doctype": "Custom Script", 
  "dt": "Program Enrollment", 
  "modified": "2019-02-14 16:11:07.495177", 
  "name": "Program Enrollment-Client", 
  "script": "frappe.ui.form.on(\"Program Enrollment\", {\n\tsinvoice: function(frm)\n\t{\n\t\tif( frm.doc.sinvoice == 0)\n\t\t{\n\t\tfrm.set_value(\"invoice\" , undefined);\n\t\tfrm.set_value(\"_party\" , undefined);\n\t\tfrm.set_df_property(\"invoice\", \"hidden\", 1);\n\t\tfrm.set_df_property(\"invoice\", \"reqd\", 0);\n\t\tfrm.set_df_property(\"_party\", \"hidden\", 1);\n\t\tfrm.set_df_property(\"_party\", \"reqd\", 0);\n\t\tfrm.set_df_property(\"generate\", \"hidden\", 1);\n\t\t}\n\n\t\telse{\n\t\tfrm.set_df_property(\"invoice\", \"hidden\", 0);\n\t\tfrm.set_df_property(\"invoice\", \"reqd\", 1);\n\t\tfrm.set_df_property(\"_party\", \"hidden\", 0);\n\t\tfrm.set_df_property(\"_party\", \"reqd\", 1);\n\t\t}\n\t},\n\n\tinvoice: function(frm) {\t\n\tif(frm.doc.invoice != undefined){\t\n\t\tfrm.set_df_property(\"generate\", \"hidden\", 1);\n\t\t}\n\n\telse frm.set_df_property(\"generate\", \"hidden\", 0);\n\t},\n\n\n  \t_party: function(frm) {\t\n\t\tfrm.set_value(\"invoice\" , undefined);\n\t\tfrm.set_df_property(\"generate\", \"hidden\", 0);\n\t\t},\n\n  \t\n  \tgenerate: function(frm) {\n\n  \t\tif(frm.doc.sinvoice == 0) return;\n  \t\tif(frm.doc.courses == undefined || frm.doc.student == undefined || frm.doc._party == undefined)\n  \t\t\t{\n  \t\t\t\tfrappe.msgprint(\"Form incomplete. Kindly fill the mandatory fields and try again.\"); return;\n  \t\t\t}\n  \t\tvar crs = [], fee = [], i = 0;\n\t\tfrm.doc.courses.forEach(function(rows){ crs[i] = rows.course; i++; });\n\t\ti = 0;frm.doc.fees.forEach(function(rows){ fee[i] = rows.fee_structure; i++; });\n  \t\tfrappe.call({\n            method: \"add_enroll.add_enroll.program_enrollment_override.make_inv\",\n            args:{\n                    'customer': frm.doc._party,\n                    'customer_name': frm.doc.student_name,\n                    'due_date': frm.doc.enrollment_date,\n                    'courses': crs,\n                    'fees':fee,\n                   },\n            async: false,\n            callback: function(r)\n            {\n            \tfrm.set_value(\"invoice\",r.message.name);\n            \tfrm.set_df_property(\"generate\", \"hidden\", 1); \n            }\n        });\n\t}\n});", 
  "script_type": "Client"
 }
]